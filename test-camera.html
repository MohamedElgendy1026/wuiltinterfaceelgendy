<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· CSS ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ */
        /* ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- HTML ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ -->
        <!-- ... -->
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ
        // ...
        
        // Ø¹Ø±Ø¶ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ø­Ø« - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
        async function showResult(barcode) {
            try {
                setStatus('loading', 'ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ elgendypro.com...');
                
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                const response = await fetch(`https://elgendypro.com/ar/product/all/`);
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¥Ù„Ù‰ Ù†Øµ HTML
                const html = await response.text();
                
                // ØªØ­Ù„ÙŠÙ„ HTML Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
                let productFound = null;
                const productElements = doc.querySelectorAll('.product-item'); // Ø§ÙØªØ±Ø¶Ù†Ø§ Ø£Ù† ÙƒÙ„ Ù…Ù†ØªØ¬ Ù„Ù‡ class 'product-item'
                
                productElements.forEach(product => {
                    const productBarcode = product.querySelector('.product-barcode')?.textContent.trim();
                    if (productBarcode === barcode) {
                        productFound = product;
                    }
                });
                
                if (productFound) {
                    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬
                    const name = productFound.querySelector('.product-title')?.textContent.trim() || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    const price = productFound.querySelector('.price')?.textContent.trim() || 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
                    const image = productFound.querySelector('img')?.src || 'https://via.placeholder.com/150?text=No+Image';
                    const link = productFound.querySelector('a')?.href || '#';
                    
                    resultContent.innerHTML = `
                        <img src="${image}" alt="${name}" class="product-image">
                        <h3 class="product-title">${name}</h3>
                        <p class="product-price">Ø§Ù„Ø³Ø¹Ø±: ${price}</p>
                        <a href="${link}" target="_blank" class="view-product-btn">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬ Ø¹Ù„Ù‰ elgendypro.com</a>
                    `;
                    
                    setStatus('ready', 'âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬');
                } else {
                    resultContent.innerHTML = `
                        <div class="alert alert-warning">
                            <p>â— Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯: <strong>${barcode}</strong></p>
                            <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù„Ù‰ <a href="https://elgendypro.com/ar/product/all/" target="_blank">elgendypro.com</a></p>
                        </div>
                    `;
                    setStatus('error', 'âŒ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                }
                
                resultEl.style.display = 'block';
                manualInput.value = barcode;
                lastResult = barcode;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©:', error);
                resultContent.innerHTML = `
                    <div class="alert alert-warning">
                        <p>â— Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬</p>
                        <p>${error.message || 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'}</p>
                        <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù„Ù‰ <a href="https://elgendypro.com/ar/product/all/" target="_blank">elgendypro.com</a></p>
                    </div>
                `;
                resultEl.style.display = 'block';
                setStatus('error', 'âŒ ' + (error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«'));
            }
        }
        
        // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ
        // ...
    </script>
</body>
</html>
